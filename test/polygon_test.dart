import 'package:flutter_test/flutter_test.dart';
import 'package:scherben_boot/models/point.dart';
import 'package:scherben_boot/models/polygon.dart';

void main() {
  final polygon = Polygon([
    Point(47.54603648878054, 7.7150186725964005),
    Point(47.56549920466025, 7.7066072656258),
    Point(47.57708072251098, 7.7172502703641115),
    Point(47.60613905058391, 7.718108577197846),
    Point(47.61099982512743, 7.727206630064094),
    Point(47.61667015712981, 7.729438227831804),
    Point(47.62199276640987, 7.751410882775416),
    Point(47.622339874280264, 7.785914817491557),
    Point(47.61829013905517, 7.7886613993595075),
    Point(47.62523235024023, 7.821277059041431),
    Point(47.61632301161574, 7.836383259315163),
    Point(47.607875093729255, 7.83209172514649),
    Point(47.600814828040065, 7.840846454850586),
    Point(47.586459875113505, 7.832435047879984),
    Point(47.5866914378568, 7.818530477173479),
    Point(47.56827900234754, 7.810634053700952),
    Point(47.555768750172525, 7.790892996525052),
    Point(47.544877765650895, 7.753127495840719),
    Point(47.54209672606116, 7.7242883862272285),
    Point(47.55356756345643, 7.710040492787231)
  ]);

  group("Various Points inside the geofenced area are accepted", () {
    final pointsToEvaluate = [
      Point(47.61568657173507, 7.819560444996336),
      Point(47.599946696350194, 7.811664022125975),
      Point(47.55918619926469, 7.733729761622852),
      Point(47.56868437752533, 7.789691367182364),
      Point(47.61105768831075, 7.741282861759719),
      Point(47.61290929084872, 7.787631430781399),
      Point(47.575401561320675, 7.785914817113931),
      Point(47.56358800818843, 7.713817043080205),
      Point(47.58837023665651, 7.737506311691285),
      Point(47.61869512624178, 7.7756151351091125),
      Point(47.59462184296711, 7.77664510330959),
    ];

    for (var containedPoint in pointsToEvaluate) {
      test(containedPoint.toString(), () {
        expect(polygon.isWithinBoundaries(containedPoint), true);
      });
    }
  });

  group("Various Points outside the geofenced area are accepted", () {
    final pointsToEvaluate = [
      Point(47.64622692654487, 7.8295168042676595),
      Point(47.58605463739518, 7.682231351598763),
      Point(47.56289301031488, 7.8425630681404295),
      Point(47.520712557772256, 7.693217679070568),
      Point(47.56150298690625, 7.94487324272162),
      Point(47.612446396360255, 7.668841764992499),
      Point(47.630727613184796, 7.90367451470235),
      Point(48.29094582799911, 8.347685697066536),
      Point(50.0165665937631, 12.358074282987413),
      Point(52.519116111693585, 13.403405804301647),
      Point(47.56150571740802, 7.59067977981759),
    ];

    for (var containedPoint in pointsToEvaluate) {
      test(containedPoint.toString(), () {
        expect(polygon.isWithinBoundaries(containedPoint), false);
      });
    }
  });
}
